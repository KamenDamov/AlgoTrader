{"ast":null,"code":"// Copyright 2012 Timothy J Fontaine <tjfontaine@gmail.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE\n'use strict';\n\nvar MemoryStore = require('./memory').MemoryStore;\n\nvar utils = require('./lookup');\n\nvar Lookup = utils.Lookup;\n\nvar util = require('util');\n\nvar Heap = require('binaryheap');\n\nvar MemoryStoreExpire = function (store, zone, opts) {\n  opts = opts || {};\n  this._store = store;\n  this._zone = zone;\n  this._max_keys = opts.max_keys;\n  this._ttl = new Heap(true);\n};\n\nMemoryStoreExpire.prototype.get = function (domain, key, cb) {\n  var self = this;\n\n  this._store.get(domain, key, function (err, results) {\n    var i, j, type, record;\n    var nresults = {};\n    var now = Date.now();\n\n    for (i in results) {\n      type = results[i];\n\n      for (j in type) {\n        record = type[j];\n        record.ttl = Math.round((record._ttl_expires - now) / 1000);\n\n        if (record.ttl > 0) {\n          if (!nresults[i]) {\n            nresults[i] = [];\n          }\n\n          nresults[i].push(record);\n        } else {\n          self._ttl.remove(record);\n\n          self._store.delete(self._zone, record.name, record.type, function () {});\n        }\n      }\n    }\n\n    cb(err, nresults);\n  });\n};\n\nMemoryStoreExpire.prototype.set = function (domain, key, data, cb) {\n  var i, j, type, record, expires;\n  var self = this;\n  var now = Date.now();\n  key = utils.ensure_absolute(key);\n\n  for (i in data) {\n    type = data[i];\n\n    for (j in type) {\n      record = type[j];\n      expires = record.ttl * 1000 + now;\n      record._ttl_expires = expires;\n\n      self._ttl.insert(record, expires);\n    }\n  }\n\n  while (this._ttl.length > this._max_keys) {\n    var record = this._ttl.pop();\n\n    this._store.delete(this._zone, record.name, record.type);\n  }\n\n  this._store.set(domain, key, data, function (err, results) {\n    if (cb) cb(err, results);\n  });\n};\n\nMemoryStoreExpire.prototype.delete = function (domain, key, type, cb) {\n  if (!cb) {\n    cb = type;\n    type = undefined;\n  }\n\n  var self = this;\n\n  this._store.get(domain, utils.ensure_absolute(key), function (gerr, gresults) {\n    var i, j, ktype, record;\n\n    for (i in gresults) {\n      ktype = gresults[i];\n\n      for (j in ktype) {\n        record = ktype[j];\n\n        self._ttl.remove(record);\n      }\n    }\n\n    if (!gresults) {\n      if (cb) cb(gerr, gresults);\n      return;\n    }\n\n    self._store.delete(domain, key, type, function (err, results) {\n      if (cb) cb(err, results);\n    });\n  });\n};\n\nvar Cache = module.exports = function (opts) {\n  opts = opts || {};\n  this._zone = '.' || opts.zone;\n  this._store = undefined;\n\n  this.purge = function () {\n    this._store = new MemoryStoreExpire(opts.store || new MemoryStore(), this._zone, opts);\n  };\n\n  this.purge();\n};\n\nCache.prototype.store = function (packet) {\n  var self = this;\n  var c = {};\n\n  function each(record) {\n    var r = c[record.name.toLowerCase()];\n    var t;\n    if (!r) r = c[record.name.toLowerCase()] = {};\n    t = r[record.type];\n    if (!t) t = r[record.type] = [];\n    t.push(record);\n  }\n\n  packet.answer.forEach(each);\n  packet.authority.forEach(each);\n  packet.additional.forEach(each);\n  Object.keys(c).forEach(function (key) {\n    self._store.set(self._zone, utils.ensure_absolute(key), c[key]);\n  });\n};\n\nCache.prototype.lookup = function (question, cb) {\n  var self = this;\n  Lookup(this._store, this._zone, question, function (err, results) {\n    var i,\n        record,\n        found = false;\n\n    for (i in results) {\n      record = results[i];\n\n      if (record.type == question.type) {\n        found = true;\n        break;\n      }\n    }\n\n    if (results && !found) {\n      self._store.delete(self._zone, utils.ensure_absolute(question.name));\n\n      results.forEach(function (rr) {\n        self._store.delete(self._zone, utils.ensure_absolute(rr.name));\n      });\n      results = null;\n    }\n\n    cb(results);\n  });\n};","map":{"version":3,"names":["MemoryStore","require","utils","Lookup","util","Heap","MemoryStoreExpire","store","zone","opts","_store","_zone","_max_keys","max_keys","_ttl","prototype","get","domain","key","cb","self","err","results","i","j","type","record","nresults","now","Date","ttl","Math","round","_ttl_expires","push","remove","delete","name","set","data","expires","ensure_absolute","insert","length","pop","undefined","gerr","gresults","ktype","Cache","module","exports","purge","packet","c","each","r","toLowerCase","t","answer","forEach","authority","additional","Object","keys","lookup","question","found","rr"],"sources":["C:/Users/Kamen/ML/AlgoTrader/node_modules/native-dns-cache/cache.js"],"sourcesContent":["// Copyright 2012 Timothy J Fontaine <tjfontaine@gmail.com>\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE\r\n\r\n'use strict';\r\n\r\nvar MemoryStore = require('./memory').MemoryStore;\r\nvar utils = require('./lookup');\r\nvar Lookup = utils.Lookup;\r\nvar util = require('util');\r\nvar Heap = require('binaryheap');\r\n\r\nvar MemoryStoreExpire = function (store, zone, opts) {\r\n  opts = opts || {};\r\n  this._store = store;\r\n  this._zone = zone;\r\n  this._max_keys = opts.max_keys;\r\n  this._ttl = new Heap(true);\r\n};\r\n\r\nMemoryStoreExpire.prototype.get = function (domain, key, cb) {\r\n  var self = this;\r\n  this._store.get(domain, key, function (err, results) {\r\n    var i, j, type, record;\r\n    var nresults = {};\r\n    var now = Date.now();\r\n\r\n    for (i in results) {\r\n      type = results[i];\r\n      for (j in type) {\r\n        record = type[j];\r\n        record.ttl = Math.round((record._ttl_expires - now) / 1000)\r\n        if (record.ttl > 0) {\r\n          if (!nresults[i]) {\r\n            nresults[i] = [];\r\n          }\r\n          nresults[i].push(record);\r\n        } else {\r\n          self._ttl.remove(record);\r\n          self._store.delete(self._zone, record.name, record.type, function () {});\r\n        }\r\n      }\r\n    }\r\n\r\n    cb(err, nresults);\r\n  });\r\n};\r\n\r\nMemoryStoreExpire.prototype.set = function (domain, key, data, cb) {\r\n  var i, j, type, record, expires;\r\n  var self = this;\r\n  var now = Date.now();\r\n\r\n  key = utils.ensure_absolute(key);\r\n\r\n  for (i in data) {\r\n    type = data[i];\r\n    for (j in type) {\r\n      record = type[j];\r\n      expires = (record.ttl * 1000) + now;\r\n      record._ttl_expires = expires;\r\n      self._ttl.insert(record, expires);\r\n    }\r\n  }\r\n\r\n  while (this._ttl.length > this._max_keys) {\r\n    var record = this._ttl.pop();\r\n    this._store.delete(this._zone, record.name, record.type);\r\n  }\r\n\r\n  this._store.set(domain, key, data, function (err, results) {\r\n    if (cb)\r\n      cb(err, results);\r\n  });\r\n};\r\n\r\nMemoryStoreExpire.prototype.delete = function (domain, key, type, cb) {\r\n  if (!cb) {\r\n    cb = type;\r\n    type = undefined;\r\n  }\r\n\r\n  var self = this;\r\n\r\n  this._store.get(domain, utils.ensure_absolute(key), function (gerr, gresults) {\r\n    var i, j, ktype, record;\r\n\r\n    for (i in gresults) {\r\n      ktype = gresults[i];\r\n      for (j in ktype) {\r\n        record = ktype[j];\r\n        self._ttl.remove(record);\r\n      }\r\n    }\r\n\r\n    if (!gresults) {\r\n      if (cb)\r\n        cb(gerr, gresults);\r\n      return;\r\n    }\r\n\r\n    self._store.delete(domain, key, type, function (err, results) {\r\n      if (cb)\r\n        cb(err, results);\r\n    });\r\n  });\r\n};\r\n\r\nvar Cache = module.exports = function (opts) {\r\n  opts = opts || {};\r\n  this._zone = '.' || opts.zone;\r\n  this._store = undefined;\r\n  this.purge = function () {\r\n    this._store = new MemoryStoreExpire(opts.store || new MemoryStore(), this._zone, opts);\r\n  }\r\n  this.purge();\r\n};\r\n\r\nCache.prototype.store = function (packet) {\r\n  var self = this;\r\n  var c = {};\r\n\r\n  function each(record) {\r\n    var r = c[record.name.toLowerCase()];\r\n    var t;\r\n\r\n    if (!r)\r\n      r = c[record.name.toLowerCase()] = {};\r\n\r\n    t = r[record.type];\r\n\r\n    if (!t)\r\n      t = r[record.type] = [];\r\n\r\n    t.push(record);\r\n  }\r\n\r\n  packet.answer.forEach(each);\r\n  packet.authority.forEach(each);\r\n  packet.additional.forEach(each);  \r\n\r\n  Object.keys(c).forEach(function (key) {\r\n    self._store.set(self._zone, utils.ensure_absolute(key), c[key]);\r\n  });\r\n};\r\n\r\nCache.prototype.lookup = function (question, cb) {\r\n  var self = this;\r\n  Lookup(this._store, this._zone, question, function (err, results) {\r\n    var i, record, found = false;\r\n\r\n    for (i in results) {\r\n      record = results[i];\r\n      if (record.type == question.type) {\r\n        found = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (results && !found) {\r\n      self._store.delete(self._zone, utils.ensure_absolute(question.name));\r\n      results.forEach(function (rr) {\r\n        self._store.delete(self._zone, utils.ensure_absolute(rr.name));\r\n      });\r\n      results = null;\r\n    }\r\n\r\n    cb(results);\r\n  });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}