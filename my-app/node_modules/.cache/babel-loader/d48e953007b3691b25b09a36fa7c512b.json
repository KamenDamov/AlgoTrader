{"ast":null,"code":"'use strict';\n\nvar errcode = require('err-code');\n\nvar retry = require('retry');\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction isRetryError(err) {\n  return err && err.code === 'EPROMISERETRY' && hasOwn.call(err, 'retried');\n}\n\nfunction promiseRetry(fn, options) {\n  var temp;\n  var operation;\n\n  if (typeof fn === 'object' && typeof options === 'function') {\n    // Swap options and fn when using alternate signature (options, fn)\n    temp = options;\n    options = fn;\n    fn = temp;\n  }\n\n  operation = retry.operation(options);\n  return new Promise(function (resolve, reject) {\n    operation.attempt(function (number) {\n      Promise.resolve().then(function () {\n        return fn(function (err) {\n          if (isRetryError(err)) {\n            err = err.retried;\n          }\n\n          throw errcode(new Error('Retrying'), 'EPROMISERETRY', {\n            retried: err\n          });\n        }, number);\n      }).then(resolve, function (err) {\n        if (isRetryError(err)) {\n          err = err.retried;\n\n          if (operation.retry(err || new Error())) {\n            return;\n          }\n        }\n\n        reject(err);\n      });\n    });\n  });\n}\n\nmodule.exports = promiseRetry;","map":{"version":3,"names":["errcode","require","retry","hasOwn","Object","prototype","hasOwnProperty","isRetryError","err","code","call","promiseRetry","fn","options","temp","operation","Promise","resolve","reject","attempt","number","then","retried","Error","module","exports"],"sources":["C:/Users/Kamen/ML/AlgoTrader/node_modules/promise-retry/index.js"],"sourcesContent":["'use strict';\n\nvar errcode = require('err-code');\nvar retry = require('retry');\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction isRetryError(err) {\n    return err && err.code === 'EPROMISERETRY' && hasOwn.call(err, 'retried');\n}\n\nfunction promiseRetry(fn, options) {\n    var temp;\n    var operation;\n\n    if (typeof fn === 'object' && typeof options === 'function') {\n        // Swap options and fn when using alternate signature (options, fn)\n        temp = options;\n        options = fn;\n        fn = temp;\n    }\n\n    operation = retry.operation(options);\n\n    return new Promise(function (resolve, reject) {\n        operation.attempt(function (number) {\n            Promise.resolve()\n            .then(function () {\n                return fn(function (err) {\n                    if (isRetryError(err)) {\n                        err = err.retried;\n                    }\n\n                    throw errcode(new Error('Retrying'), 'EPROMISERETRY', { retried: err });\n                }, number);\n            })\n            .then(resolve, function (err) {\n                if (isRetryError(err)) {\n                    err = err.retried;\n\n                    if (operation.retry(err || new Error())) {\n                        return;\n                    }\n                }\n\n                reject(err);\n            });\n        });\n    });\n}\n\nmodule.exports = promiseRetry;\n"],"mappings":"AAAA;;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAAnB;;AAEA,IAAIE,MAAM,GAAGC,MAAM,CAACC,SAAP,CAAiBC,cAA9B;;AAEA,SAASC,YAAT,CAAsBC,GAAtB,EAA2B;EACvB,OAAOA,GAAG,IAAIA,GAAG,CAACC,IAAJ,KAAa,eAApB,IAAuCN,MAAM,CAACO,IAAP,CAAYF,GAAZ,EAAiB,SAAjB,CAA9C;AACH;;AAED,SAASG,YAAT,CAAsBC,EAAtB,EAA0BC,OAA1B,EAAmC;EAC/B,IAAIC,IAAJ;EACA,IAAIC,SAAJ;;EAEA,IAAI,OAAOH,EAAP,KAAc,QAAd,IAA0B,OAAOC,OAAP,KAAmB,UAAjD,EAA6D;IACzD;IACAC,IAAI,GAAGD,OAAP;IACAA,OAAO,GAAGD,EAAV;IACAA,EAAE,GAAGE,IAAL;EACH;;EAEDC,SAAS,GAAGb,KAAK,CAACa,SAAN,CAAgBF,OAAhB,CAAZ;EAEA,OAAO,IAAIG,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;IAC1CH,SAAS,CAACI,OAAV,CAAkB,UAAUC,MAAV,EAAkB;MAChCJ,OAAO,CAACC,OAAR,GACCI,IADD,CACM,YAAY;QACd,OAAOT,EAAE,CAAC,UAAUJ,GAAV,EAAe;UACrB,IAAID,YAAY,CAACC,GAAD,CAAhB,EAAuB;YACnBA,GAAG,GAAGA,GAAG,CAACc,OAAV;UACH;;UAED,MAAMtB,OAAO,CAAC,IAAIuB,KAAJ,CAAU,UAAV,CAAD,EAAwB,eAAxB,EAAyC;YAAED,OAAO,EAAEd;UAAX,CAAzC,CAAb;QACH,CANQ,EAMNY,MANM,CAAT;MAOH,CATD,EAUCC,IAVD,CAUMJ,OAVN,EAUe,UAAUT,GAAV,EAAe;QAC1B,IAAID,YAAY,CAACC,GAAD,CAAhB,EAAuB;UACnBA,GAAG,GAAGA,GAAG,CAACc,OAAV;;UAEA,IAAIP,SAAS,CAACb,KAAV,CAAgBM,GAAG,IAAI,IAAIe,KAAJ,EAAvB,CAAJ,EAAyC;YACrC;UACH;QACJ;;QAEDL,MAAM,CAACV,GAAD,CAAN;MACH,CApBD;IAqBH,CAtBD;EAuBH,CAxBM,CAAP;AAyBH;;AAEDgB,MAAM,CAACC,OAAP,GAAiBd,YAAjB"},"metadata":{},"sourceType":"script"}