{"ast":null,"code":"// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nlet eos;\n\nfunction once(callback) {\n  let called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback(...arguments);\n  };\n}\n\nconst _require$codes = require('../../../errors').codes,\n      ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n      ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  let closed = false;\n  stream.on('close', () => {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, err => {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  let destroyed = false;\n  return err => {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  const callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  let error;\n  const destroys = streams.map(function (stream, i) {\n    const reading = i < streams.length - 1;\n    const writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;","map":{"version":3,"names":["eos","once","callback","called","arguments","_require$codes","require","codes","ERR_MISSING_ARGS","ERR_STREAM_DESTROYED","noop","err","isRequest","stream","setHeader","abort","destroyer","reading","writing","closed","on","undefined","readable","writable","destroyed","destroy","call","fn","pipe","from","to","popCallback","streams","length","pop","pipeline","_len","Array","_key","isArray","error","destroys","map","i","forEach","reduce","module","exports"],"sources":["C:/Users/Kamen/ML/AlgoTrader/node_modules/readable-stream/lib/internal/streams/pipeline.js"],"sourcesContent":["// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nlet eos;\nfunction once(callback) {\n  let called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback(...arguments);\n  };\n}\nconst _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  let closed = false;\n  stream.on('close', () => {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, err => {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  let destroyed = false;\n  return err => {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  const callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  let error;\n  const destroys = streams.map(function (stream, i) {\n    const reading = i < streams.length - 1;\n    const writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;"],"mappings":"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"},"metadata":{},"sourceType":"script"}