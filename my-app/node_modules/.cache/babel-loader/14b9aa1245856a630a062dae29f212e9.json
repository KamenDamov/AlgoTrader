{"ast":null,"code":"'use strict';\n\nconst LRU = require('lru-cache');\n\nconst MAX_SIZE = 50 * 1024 * 1024; // 50MB\n\nconst MAX_AGE = 3 * 60 * 1000;\nconst MEMOIZED = new LRU({\n  max: MAX_SIZE,\n  maxAge: MAX_AGE,\n  length: (entry, key) => key.startsWith('key:') ? entry.data.length : entry.length\n});\nmodule.exports.clearMemoized = clearMemoized;\n\nfunction clearMemoized() {\n  const old = {};\n  MEMOIZED.forEach((v, k) => {\n    old[k] = v;\n  });\n  MEMOIZED.reset();\n  return old;\n}\n\nmodule.exports.put = put;\n\nfunction put(cache, entry, data, opts) {\n  pickMem(opts).set(`key:${cache}:${entry.key}`, {\n    entry,\n    data\n  });\n  putDigest(cache, entry.integrity, data, opts);\n}\n\nmodule.exports.put.byDigest = putDigest;\n\nfunction putDigest(cache, integrity, data, opts) {\n  pickMem(opts).set(`digest:${cache}:${integrity}`, data);\n}\n\nmodule.exports.get = get;\n\nfunction get(cache, key, opts) {\n  return pickMem(opts).get(`key:${cache}:${key}`);\n}\n\nmodule.exports.get.byDigest = getDigest;\n\nfunction getDigest(cache, integrity, opts) {\n  return pickMem(opts).get(`digest:${cache}:${integrity}`);\n}\n\nclass ObjProxy {\n  constructor(obj) {\n    this.obj = obj;\n  }\n\n  get(key) {\n    return this.obj[key];\n  }\n\n  set(key, val) {\n    this.obj[key] = val;\n  }\n\n}\n\nfunction pickMem(opts) {\n  if (!opts || !opts.memoize) return MEMOIZED;else if (opts.memoize.get && opts.memoize.set) return opts.memoize;else if (typeof opts.memoize === 'object') return new ObjProxy(opts.memoize);else return MEMOIZED;\n}","map":{"version":3,"names":["LRU","require","MAX_SIZE","MAX_AGE","MEMOIZED","max","maxAge","length","entry","key","startsWith","data","module","exports","clearMemoized","old","forEach","v","k","reset","put","cache","opts","pickMem","set","putDigest","integrity","byDigest","get","getDigest","ObjProxy","constructor","obj","val","memoize"],"sources":["C:/Users/Kamen/ML/AlgoTrader/node_modules/cacache/lib/memoization.js"],"sourcesContent":["'use strict'\n\nconst LRU = require('lru-cache')\n\nconst MAX_SIZE = 50 * 1024 * 1024 // 50MB\nconst MAX_AGE = 3 * 60 * 1000\n\nconst MEMOIZED = new LRU({\n  max: MAX_SIZE,\n  maxAge: MAX_AGE,\n  length: (entry, key) => key.startsWith('key:') ? entry.data.length : entry.length,\n})\n\nmodule.exports.clearMemoized = clearMemoized\n\nfunction clearMemoized () {\n  const old = {}\n  MEMOIZED.forEach((v, k) => {\n    old[k] = v\n  })\n  MEMOIZED.reset()\n  return old\n}\n\nmodule.exports.put = put\n\nfunction put (cache, entry, data, opts) {\n  pickMem(opts).set(`key:${cache}:${entry.key}`, { entry, data })\n  putDigest(cache, entry.integrity, data, opts)\n}\n\nmodule.exports.put.byDigest = putDigest\n\nfunction putDigest (cache, integrity, data, opts) {\n  pickMem(opts).set(`digest:${cache}:${integrity}`, data)\n}\n\nmodule.exports.get = get\n\nfunction get (cache, key, opts) {\n  return pickMem(opts).get(`key:${cache}:${key}`)\n}\n\nmodule.exports.get.byDigest = getDigest\n\nfunction getDigest (cache, integrity, opts) {\n  return pickMem(opts).get(`digest:${cache}:${integrity}`)\n}\n\nclass ObjProxy {\n  constructor (obj) {\n    this.obj = obj\n  }\n\n  get (key) {\n    return this.obj[key]\n  }\n\n  set (key, val) {\n    this.obj[key] = val\n  }\n}\n\nfunction pickMem (opts) {\n  if (!opts || !opts.memoize)\n    return MEMOIZED\n  else if (opts.memoize.get && opts.memoize.set)\n    return opts.memoize\n  else if (typeof opts.memoize === 'object')\n    return new ObjProxy(opts.memoize)\n  else\n    return MEMOIZED\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}